<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1545px" preserveAspectRatio="none" style="width:1009px;height:1545px;background:#0F172A;" version="1.1" viewBox="0 0 1009 1545" width="1009px" zoomAndPan="magnify"><title>TURN Relay Fallback (when P2P fails)</title><defs/><g><rect fill="#0F172A" height="1545" style="stroke:none;stroke-width:1;" width="1009" x="0" y="0"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="465.1582" x="270.7495" y="35.4209">TURN Relay Fallback (when P2P fails)</text><rect fill="#1E293B" height="855.9688" style="stroke:#334155;stroke-width:1;" width="10" x="601.3359" y="520.8906"/><line style="stroke:#334155;stroke-width:1;" x1="51" x2="51" y1="94.5469" y2="1498.7031"/><line style="stroke:#334155;stroke-width:1;" x1="314.04" x2="314.04" y1="94.5469" y2="1498.7031"/><line style="stroke:#334155;stroke-width:1;" x1="605.377" x2="605.377" y1="94.5469" y2="1498.7031"/><line style="stroke:#334155;stroke-width:1;" x1="726.2949" x2="726.2949" y1="94.5469" y2="1498.7031"/><line style="stroke:#334155;stroke-width:1;" x1="964.6807" x2="964.6807" y1="94.5469" y2="1498.7031"/><rect fill="#1E293B" height="27.9688" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="62.8906" x="20" y="65.5781"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="48.8906" x="27" y="83.7168">Browser</text><rect fill="#1E293B" height="27.9688" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="62.8906" x="20" y="1497.7031"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="48.8906" x="27" y="1515.8418">Browser</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="89.873" x="270.04" y="51.6094"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.873" x="277.04" y="69.748">STUN Server</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="68.3145" x="280.8193" y="83.7168">(port 3478)</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="89.873" x="270.04" y="1497.7031"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.873" x="277.04" y="1515.8418">STUN Server</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="68.3145" x="280.8193" y="1529.8105">(port 3478)</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="91.918" x="560.377" y="51.6094"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="77.918" x="567.377" y="69.748">Relay Socket</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.9492" x="568.3613" y="83.7168">(port 54000)</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="91.918" x="560.377" y="1497.7031"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="77.918" x="567.377" y="1515.8418">Relay Socket</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.9492" x="568.3613" y="1529.8105">(port 54000)</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="89.873" x="682.2949" y="51.6094"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.873" x="689.2949" y="69.748">STUN Server</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="63.416" x="695.5234" y="83.7168">(signaling)</text><rect fill="#1E293B" height="41.9375" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="89.873" x="682.2949" y="1497.7031"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.873" x="689.2949" y="1515.8418">STUN Server</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="63.416" x="695.5234" y="1529.8105">(signaling)</text><rect fill="#1E293B" height="27.9688" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="40.9766" x="944.6807" y="65.5781"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="26.9766" x="951.6807" y="83.7168">WAF</text><rect fill="#1E293B" height="27.9688" rx="2.5" ry="2.5" style="stroke:#3B82F6;stroke-width:1;" width="40.9766" x="944.6807" y="1497.7031"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="26.9766" x="951.6807" y="1515.8418">WAF</text><rect fill="#1E293B" height="855.9688" style="stroke:#334155;stroke-width:1;" width="10" x="601.3359" y="520.8906"/><path d="M17,109.5469 L17,160.5469 L997,160.5469 L997,119.5469 L987,109.5469 L17,109.5469 " fill="#334155" style="stroke:#334155;stroke-width:1;"/><path d="M987,109.5469 L987,119.5469 L997,119.5469 L987,109.5469 " fill="#334155" style="stroke:#334155;stroke-width:1;"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="181.5938" x="391.3188" y="125.6855">P2P connectivity checks failed</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="223.0195" x="391.3188" y="139.6543">(symmetric NAT or firewall blocking).</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="175.541" x="391.3188" y="153.623">ICE agent falls back to TURN.</text><rect fill="#334155" height="3" style="stroke:#334155;stroke-width:1;" width="997.6572" x="5" y="186.4375"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="186.4375" y2="186.4375"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="189.4375" y2="189.4375"/><rect fill="#334155" height="21.9688" style="stroke:#000000;stroke-width:1;" width="131.498" x="438.0796" y="176.4531"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="113.3203" x="444.0796" y="191.5918">1. TURN Allocate</text><polygon fill="#94A3B8" points="302.9766,238.3594,312.9766,242.3594,302.9766,246.3594,306.9766,242.3594" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="308.9766" y1="242.3594" y2="242.3594"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="101.3555" x="58.4453" y="223.5605">Allocate Request</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="94.623" x="58.4453" y="237.5293">(no credentials)</text><polygon fill="#94A3B8" points="62.4453,294.2656,52.4453,298.2656,62.4453,302.2656,58.4453,298.2656" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="56.4453" x2="313.9766" y1="298.2656" y2="298.2656"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="107.2852" x="68.4453" y="265.498">401 Unauthorized</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="112.3242" x="68.4453" y="279.4668">REALM: "keylessh"</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="106.7285" x="68.4453" y="293.4355">NONCE: "abc123"</text><polygon fill="#94A3B8" points="302.9766,378.1094,312.9766,382.1094,302.9766,386.1094,306.9766,382.1094" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="308.9766" y1="382.1094" y2="382.1094"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="101.3555" x="58.4453" y="321.4043">Allocate Request</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="156.627" x="58.4453" y="335.373">Username: "1708000000"</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="109.2539" x="58.4453" y="349.3418">Realm: "keylessh"</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="101.2734" x="58.4453" y="363.3105">Nonce: "abc123"</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="206.4902" x="58.4453" y="377.2793">MESSAGE-INTEGRITY: HMAC-SHA1</text><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="356.9766" y1="465.9531" y2="465.9531"/><line style="stroke:#94A3B8;stroke-width:1;" x1="356.9766" x2="356.9766" y1="465.9531" y2="478.9531"/><line style="stroke:#94A3B8;stroke-width:1;" x1="315.9766" x2="356.9766" y1="478.9531" y2="478.9531"/><polygon fill="#94A3B8" points="325.9766,474.9531,315.9766,478.9531,325.9766,482.9531,321.9766,478.9531" style="stroke:#94A3B8;stroke-width:1;"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="53.332" x="321.9766" y="405.248">Validate:</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="210.8203" x="321.9766" y="419.2168">1. timestamp &gt; now? (not expired)</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="277.3594" x="321.9766" y="433.1855">2. password = HMAC-SHA1(secret, username)</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="187.4004" x="321.9766" y="447.1543">3. key = MD5(user:realm:pass)</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="179.0098" x="321.9766" y="461.123">4. verify MESSAGE-INTEGRITY</text><polygon fill="#94A3B8" points="589.3359,516.8906,599.3359,520.8906,589.3359,524.8906,593.3359,520.8906" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="595.3359" y1="520.8906" y2="520.8906"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="98.9063" x="321.9766" y="502.0918">Bind UDP socket</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="178.207" x="321.9766" y="516.0605">on random port 49152-65535</text><polygon fill="#94A3B8" points="62.4453,586.7656,52.4453,590.7656,62.4453,594.7656,58.4453,590.7656" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="56.4453" x2="313.9766" y1="590.7656" y2="590.7656"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="100.377" x="68.4453" y="544.0293">Allocate Success</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="239.5313" x="68.4453" y="557.998">XOR-RELAYED-ADDRESS: 5.6.7.8:54000</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="211.7637" x="68.4453" y="571.9668">XOR-MAPPED-ADDRESS: (reflexive)</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="84.2754" x="68.4453" y="585.9355">LIFETIME: 600</text><rect fill="#334155" height="3" style="stroke:#334155;stroke-width:1;" width="997.6572" x="5" y="618.75"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="618.75" y2="618.75"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="621.75" y2="621.75"/><rect fill="#334155" height="21.9688" style="stroke:#000000;stroke-width:1;" width="158.9316" x="424.3628" y="608.7656"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="140.7539" x="430.3628" y="623.9043">2. Create Permission</text><polygon fill="#94A3B8" points="302.9766,670.6719,312.9766,674.6719,302.9766,678.6719,306.9766,674.6719" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="308.9766" y1="674.6719" y2="674.6719"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="105.498" x="58.4453" y="655.873">CreatePermission</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="160.4121" x="58.4453" y="669.8418">{ peer: WAF's IP address }</text><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="356.9766" y1="716.6094" y2="716.6094"/><line style="stroke:#94A3B8;stroke-width:1;" x1="356.9766" x2="356.9766" y1="716.6094" y2="729.6094"/><line style="stroke:#94A3B8;stroke-width:1;" x1="315.9766" x2="356.9766" y1="729.6094" y2="729.6094"/><polygon fill="#94A3B8" points="325.9766,725.6094,315.9766,729.6094,325.9766,733.6094,321.9766,729.6094" style="stroke:#94A3B8;stroke-width:1;"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="105.6797" x="321.9766" y="697.8105">Install permission</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="101.0918" x="321.9766" y="711.7793">(expires in 300s)</text><polygon fill="#94A3B8" points="62.4453,753.5781,52.4453,757.5781,62.4453,761.5781,58.4453,757.5781" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="56.4453" x2="313.9766" y1="757.5781" y2="757.5781"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="157.6172" x="68.4453" y="752.748">CreatePermission Success</text><rect fill="#334155" height="3" style="stroke:#334155;stroke-width:1;" width="997.6572" x="5" y="785.5625"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="785.5625" y2="785.5625"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="788.5625" y2="788.5625"/><rect fill="#334155" height="21.9688" style="stroke:#000000;stroke-width:1;" width="325.4375" x="341.1099" y="775.5781"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="307.2598" x="347.1099" y="790.7168">3. Channel Bind (optional, reduces overhead)</text><polygon fill="#94A3B8" points="302.9766,851.4531,312.9766,855.4531,302.9766,859.4531,306.9766,855.4531" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="308.9766" y1="855.4531" y2="855.4531"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="76.0547" x="58.4453" y="822.6855">ChannelBind</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="115.8809" x="58.4453" y="836.6543">{ channel: 0x4001,</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="116.8301" x="66.0742" y="850.623">peer: WAF IP:port }</text><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="356.9766" y1="883.4219" y2="883.4219"/><line style="stroke:#94A3B8;stroke-width:1;" x1="356.9766" x2="356.9766" y1="883.4219" y2="896.4219"/><line style="stroke:#94A3B8;stroke-width:1;" x1="315.9766" x2="356.9766" y1="896.4219" y2="896.4219"/><polygon fill="#94A3B8" points="325.9766,892.4219,315.9766,896.4219,325.9766,900.4219,321.9766,896.4219" style="stroke:#94A3B8;stroke-width:1;"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="170.7129" x="321.9766" y="878.5918">Map channel 0x4001 &#8594; peer</text><polygon fill="#94A3B8" points="62.4453,920.3906,52.4453,924.3906,62.4453,928.3906,58.4453,924.3906" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="56.4453" x2="313.9766" y1="924.3906" y2="924.3906"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="128.1738" x="68.4453" y="919.5605">ChannelBind Success</text><rect fill="#334155" height="3" style="stroke:#334155;stroke-width:1;" width="997.6572" x="5" y="952.375"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="952.375" y2="952.375"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="955.375" y2="955.375"/><rect fill="#334155" height="21.9688" style="stroke:#000000;stroke-width:1;" width="198.7637" x="404.4468" y="942.3906"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="180.5859" x="410.4468" y="957.5293">4. ICE Candidate Exchange</text><polygon fill="#94A3B8" points="715.2314,1004.2969,725.2314,1008.2969,715.2314,1012.2969,719.2314,1008.2969" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="721.2314" y1="1008.2969" y2="1008.2969"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="154.4531" x="58.4453" y="989.498">candidate { type: "relay",</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="150.9141" x="66.0742" y="1003.4668">address: 5.6.7.8:54000 }</text><polygon fill="#94A3B8" points="953.1689,1032.2656,963.1689,1036.2656,953.1689,1040.2656,957.1689,1036.2656" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="727.2314" x2="959.1689" y1="1036.2656" y2="1036.2656"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="109.5996" x="734.2314" y="1031.4355">forward candidate</text><path d="M17,1049.2656 L17,1100.2656 L997,1100.2656 L997,1059.2656 L987,1049.2656 L17,1049.2656 " fill="#1E293B" style="stroke:#334155;stroke-width:1;"/><path d="M987,1049.2656 L987,1059.2656 L997,1059.2656 L987,1049.2656 " fill="#1E293B" style="stroke:#334155;stroke-width:1;"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="248.748" x="378.4546" y="1065.4043">WAF also gets TURN credentials and may</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="248.3789" x="378.4546" y="1079.373">allocate its own relay, or connect directly</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="186.1523" x="378.4546" y="1093.3418">to the browser's relay address.</text><rect fill="#334155" height="3" style="stroke:#334155;stroke-width:1;" width="997.6572" x="5" y="1126.1563"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="1126.1563" y2="1126.1563"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1002.6572" y1="1129.1563" y2="1129.1563"/><rect fill="#334155" height="21.9688" style="stroke:#000000;stroke-width:1;" width="108.7461" x="449.4556" y="1116.1719"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="90.5684" x="455.4556" y="1131.3105">5. Data Relay</text><polygon fill="#94A3B8" points="302.9766,1178.0781,312.9766,1182.0781,302.9766,1186.0781,306.9766,1182.0781" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="51.4453" x2="308.9766" y1="1182.0781" y2="1182.0781"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="77.918" x="58.4453" y="1163.2793">ChannelData</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="163.9512" x="58.4453" y="1177.248">[0x4001 | length | payload]</text><path d="M319,1157.125 L319,1180.125 L468,1180.125 L468,1167.125 L458,1157.125 L319,1157.125 " fill="#1E293B" style="stroke:#334155;stroke-width:1;"/><path d="M458,1157.125 L458,1167.125 L468,1167.125 L458,1157.125 " fill="#1E293B" style="stroke:#334155;stroke-width:1;"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="128.502" x="325" y="1173.2637">4-byte overhead only</text><polygon fill="#94A3B8" points="589.3359,1206.0469,599.3359,1210.0469,589.3359,1214.0469,593.3359,1210.0469" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="595.3359" y1="1210.0469" y2="1210.0469"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="94.3125" x="321.9766" y="1205.2168">extract payload</text><polygon fill="#94A3B8" points="953.1689,1234.0156,963.1689,1238.0156,953.1689,1242.0156,957.1689,1238.0156" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="611.3359" x2="959.1689" y1="1238.0156" y2="1238.0156"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="80.8359" x="618.3359" y="1233.1855">UDP: payload</text><polygon fill="#94A3B8" points="622.3359,1261.9844,612.3359,1265.9844,622.3359,1269.9844,618.3359,1265.9844" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="616.3359" x2="964.1689" y1="1265.9844" y2="1265.9844"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="87.8848" x="628.3359" y="1261.1543">UDP: response</text><polygon fill="#94A3B8" points="325.9766,1289.9531,315.9766,1293.9531,325.9766,1297.9531,321.9766,1293.9531" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="319.9766" x2="600.3359" y1="1293.9531" y2="1293.9531"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="114.8672" x="331.9766" y="1289.123">received from peer</text><line style="stroke:#94A3B8;stroke-width:1;" x1="314.9766" x2="356.9766" y1="1321.9219" y2="1321.9219"/><line style="stroke:#94A3B8;stroke-width:1;" x1="356.9766" x2="356.9766" y1="1321.9219" y2="1334.9219"/><line style="stroke:#94A3B8;stroke-width:1;" x1="315.9766" x2="356.9766" y1="1334.9219" y2="1334.9219"/><polygon fill="#94A3B8" points="325.9766,1330.9219,315.9766,1334.9219,325.9766,1338.9219,321.9766,1334.9219" style="stroke:#94A3B8;stroke-width:1;"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="141.1523" x="321.9766" y="1317.0918">lookup channel by peer</text><polygon fill="#94A3B8" points="62.4453,1372.8594,52.4453,1376.8594,62.4453,1380.8594,58.4453,1376.8594" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="56.4453" x2="313.9766" y1="1376.8594" y2="1376.8594"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="77.918" x="68.4453" y="1358.0605">ChannelData</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="171" x="68.4453" y="1372.0293">[0x4001 | length | response]</text><path d="M17,1389.8594 L17,1440.8594 L997,1440.8594 L997,1399.8594 L987,1389.8594 L17,1389.8594 " fill="#334155" style="stroke:#334155;stroke-width:1;"/><path d="M987,1389.8594 L987,1399.8594 L997,1399.8594 L987,1389.8594 " fill="#334155" style="stroke:#334155;stroke-width:1;"/><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="247.1484" x="373.3921" y="1405.998">DataChannel established via TURN relay.</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="258.873" x="373.3921" y="1419.9668">Higher latency than P2P but works through</text><text fill="#F8FAFC" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="185.373" x="373.3921" y="1433.9355">any NAT/firewall configuration.</text><polygon fill="#94A3B8" points="738.2314,1476.7031,728.2314,1480.7031,738.2314,1484.7031,734.2314,1480.7031" style="stroke:#94A3B8;stroke-width:1;"/><line style="stroke:#94A3B8;stroke-width:1;" x1="732.2314" x2="964.1689" y1="1480.7031" y2="1480.7031"/><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="75.832" x="744.2314" y="1461.9043">client_status</text><text fill="#94A3B8" font-family="Segoe UI" font-size="12" lengthAdjust="spacing" textLength="213.9375" x="744.2314" y="1475.873">{ clientId, connectionType: "turn" }</text><!--SRC=[ZLPjRnf74Fv-ls9AFmHBXl9gEoSv5G6S81c20BUDIbGjTtkmyh5xtTipfcc-zWVq9_QNzDbx0ODn4akMx9rdPcUUUMRsVZ0hlkOKXKn8nmWJSfhTJKOquI7RqWqBmmNpxgcyMN59uyQO0YR2-CnnudiX8wRPcZuxH1Qqr2gHVbU5IjEFjQ1-sM2m-3nWIMXkb3IvARWAME0TcaOCIPIcVAautGrAXyQf-8jJlO73AVypuTBZjoB0h-HlbVQvpkCscwrwktqATPnSdJTUDnT0ZfasmXCHa-RxG0VtBQuQmSKXu5IP7QtL9ZzytM9mAmwVe7U6aJ9VIJYrdYpQMaxTNf3n3l6YbmCVmhvAQqyy29YVnNe9-3ohBuuJxJcZqbjm4NDT8XRJ8ljxbze1S3gx6o6yVk1wBikHqeQQhSkhizGpDeayxPQ9UQgyUsuAltQhLgjbZZerVyU5iLXA5Wgvp2yKozDUltPkKi261Jk08z4WKWXKb7YUsNUqsUdob9JSCo3ERCbRSUy-JYUE-m2Ku-rwpOqM7eqwCmAXWT1yWncbHOZYR69Lu0RTFh4bHoO1R74wd6HKEjXLXqkVR2wEStrDzMesxfqG0HWIlBvsdA85bJSPf-xUFB6jZIs9Kf6dkOzR1CiMWeLMu5EukzIgrUbEiiIibCOC-tCvwNTkXowLxlasv76yAitbwCEesySHMtZrHhFqVTVV0I2nC-1NlwnTrT8V19jm5gwFuYj8SHz_BeVzwRJphbyPZ6RzTvF1xADBxuUTRcNwlbClojXT_GlwxUDgTox1bH5hNC_M4Rq1XvkV2JGOueyH-k2VpMMZIX6BumtcXwxtKSin1rVcd98yRK2RLKAIG0rxxR8zTtMQk_M7kLKbI4K4MtgMxZx7JBWklHNewLrlJ74kSIL9C-chDQLQRxskjnkLYtQxsNQOLPVbCdK-sROTtTF4yy3YNFxsOLAPz6yx7_kzIgVNco0bbzhLY-fbzSfD9od333lZyLD8MVCWv8_YmLPyExZfpmP3zFgYLalL1xgwg1etZRbUYpWMIFoq0ZFS7ZQNdodYO8qmRAzY6eo9-Rv6jlJbk8S3YPvXIA8dtkMiQJ49ISrQ3G8-GSJnfGKXQV9eO7V5CAvXndzPHGOO5fw3MZy1Bfts5MV-sKj5PVxMtTRZPV-wL7i4fVNpkQHzZQZGJPlvhBmXYmhNt9F- - -VVrFDaKVjB3-g1ukpYw48tgUAf_sYZBf_l1AmzbxmTxZEPRMGdB5LKAKqxxyMHI6pkS4OCk_bS2fJUC8pABjPBMn9BpLA0HQDeoKsSBQqd-uSGWTRGCwukr2k0KnkP2VtShijykvAFpdicj6YiHNm15PUzAXw3FF-ZRTckKeyPbdySVRMd5ZUNl-Vz-9j2BfTcXJyYjWqLypzbbMgnN1aioifYczTjzK9AXjldOyuVZSRu5Y6Sx7p79XQ0kxCvzko9Rsf4IP6ICTzxvac33euXzIdGTcVibRD3X4hT9tkTBRRVqjUB11H9V78Sdnzlesy-aZPiCNPs5Iz24Q-G-8DWcIZIGFOLV0zg4IT4TEbjqMMMVS0k4aDOq7XOpGgVBykLrOpSsYVrfzrx2gK4OfbePaVwgGfoMlCP20NqzmVIC4cSJd1wCF3FTm-vahDiE4oYPGa3y3y0]--></g></svg>